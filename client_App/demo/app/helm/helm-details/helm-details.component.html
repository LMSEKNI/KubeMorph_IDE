<mat-toolbar class="header">
  <div class="header-left" >
    <img class="artifact" src="assets/images/artifact.png" alt="Logo" >
  </div>
  <!--search bar-->
  <div class="header-right">
    <mat-form-field appearance="standard" class="search-bar">
      <input matInput placeholder="Search" #searchInput >
      <button mat-icon-button matSuffix (click)="searchAndNavigate(searchInput.value)">
        <mat-icon class="icon">search</mat-icon>
      </button>
    </mat-form-field>
  </div>

</mat-toolbar>
<div class="header-bar">
  <button mat-icon-button (click)="goBack()" aria-label="Go Back" >
    <img src="assets/images/arrow_back_.svg" alt="Go Back Icon">
  </button>
  <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
    <img src="assets/images/3pt.svg" alt="Go Back Icon">
  </button>
  <mat-menu #menu="matMenu">
    <button mat-menu-item >
      <mat-icon>home</mat-icon>
      <span>List Resource</span>
    </button>
    <button mat-menu-item routerLink="/monitoring">
      <mat-icon>settings_heart</mat-icon>
      <span>Monotoring</span>
    </button>
    <button mat-menu-item [matMenuTriggerFor]="helm" #menuTrigger>
      <mat-icon>notifications_off</mat-icon>
      <span>Helm</span>
    </button>
    <mat-menu #helm="matMenu">
      <button mat-menu-item routerLink="/helm">Artifact Hub</button>
      <button mat-menu-item routerLink="/helm-release">Releases </button>
    </mat-menu>
  </mat-menu>
</div>

<div class="center-container" *ngIf="chart">
  <mat-card class="detail-card" appearance="outlined">
    <div class="header-aligned">
      <img mat-card-sm-image [src]="image"  alt="Image" class="card-image">
      <div class="card-title-group">
        <mat-card-title>{{ chart.name }}</mat-card-title>
      </div>
      <div class="butt">
        <button mat-button class="card-button" (click)="openDialog(chart.name)">
          <mat-icon>
            <img src="/assets/images/download.svg" alt="Download Icon">
          </mat-icon>
          Helm Chart
        </button>


        <button mat-button class="card-button">
          <mat-icon>
            <img src="/assets/images/template.svg" alt="Download Icon" (click)="openDialogTemplate()" >
          </mat-icon>
          Template
        </button>
      </div>

    </div>
    <mat-card-content>
      <div class="content-wrapper">
        <div class="content-item">
          <h4>Description:</h4>
          <p>{{ chart.description }}</p>
        </div>
        <div class="content-item">
          <h4>Keywords:</h4>
          <p>{{ chart.keywords }}</p>
        </div>
        <div class="content-item">
          <h4>Chart Version:</h4>
          <p>{{ chart.chartVersion }}</p>
        </div>
        <div class="content-item">
          <h4>App Version:</h4>
          <p>{{ chart.appVersion }}</p>
        </div>
      </div>


      <div class="content-wrapper">
        <mat-card-title>Install Helm Chart</mat-card-title>
        <pre><code>helm install [RELEASE_NAME] prometheus-community/kube-prometheus-stack</code></pre>
        <br>
        See <code><a href="https://helm.sh/docs/helm/helm_install/" target="_blank">helm install </a></code> for more information.
      </div>

      <div class="content-wrapper">
        <mat-card-title>Uninstall Helm Chart</mat-card-title>
        <pre><code>helm uninstall [RELEASE_NAME]</code></pre>
        <br>
        <p>This removes all the Kubernetes components associated with the chart and deletes the release.</p>
        See <code><a href="https://helm.sh/docs/helm/helm_uninstall/" target="_blank">helm uninstall </a></code> for more information.
        <p>CRDs created by this chart are not removed by default and should be manually cleaned up:</p>
        <mat-card class="code-block">
          <pre><code>
kubectl delete crd alertmanagerconfigs.monitoring.coreos.com
kubectl delete crd alertmanagers.monitoring.coreos.com
kubectl delete crd podmonitors.monitoring.coreos.com
kubectl delete crd probes.monitoring.coreos.com
kubectl delete crd prometheusagents.monitoring.coreos.com
kubectl delete crd prometheuses.monitoring.coreos.com
kubectl delete crd prometheusrules.monitoring.coreos.com
kubectl delete crd scrapeconfigs.monitoring.coreos.com
kubectl delete crd servicemonitors.monitoring.coreos.com
kubectl delete crd thanosrulers.monitoring.coreos.com
          </code></pre>
        </mat-card>
      </div>

      <div class="content-wrapper">
        <mat-card-title>Upgrading Chart</mat-card-title>
        <pre><code>helm upgrade [RELEASE_NAME] prometheus-community/kube-prometheus-stack</code></pre>
        <br>
        See <code><a href="https://helm.sh/docs/helm/helm_upgrade/" target="_blank">helm upgrade </a></code> for more information.
      </div>

      <div class="content-wrapper">
        <mat-card-title>Configuration</mat-card-title>
        See <a href="https://helm.sh/docs/intro/using_helm/#customizing-the-chart-before-installing" target="_blank">Customizing the Chart Before Installing </a> to see all configurable options with details comments:
        <br>
        <pre><code>helm show values prometheus-community/kube-prometheus-stack</code></pre>
        <br>
        You may also <code>helm show values </code> on this chart's dependencies for additional options.
      </div>
    </mat-card-content>
  </mat-card>
</div>


